"use strict";(self.webpackChunkreactgoit_react_hw_05_movies=self.webpackChunkreactgoit_react_hw_05_movies||[]).push([[415],{5882:function(e,t,n){n.d(t,{Z:function(){return S}});var a,r,c,i,o,s,u=n(9439),l=n(2791),p=n(8402),h=n(6619),g=n(168),d=n(3626),m=n(1607),f=d.Z.ul(a||(a=(0,g.Z)(["\n  width: 100%;\n  gap: ",";\n  display: flex;\n  flex-wrap: wrap;\n  margin-bottom: ",";\n"])),m.Z.space[5],m.Z.space[6]),Z=n(1087),v=d.Z.li(r||(r=(0,g.Z)(["\n  width: calc(((100% - ("," * 2)) / 3));\n  padding: ",";\n  background-color: ",";\n  border-radius: ",";\n  box-shadow: ",";\n  transition: ",";\n  cursor: pointer;\n\n  :hover {\n    scale: 1.1;\n    box-shadow: ",";\n  }\n"])),m.Z.space[5],m.Z.space[3],m.Z.colors.background,m.Z.radii.normal,m.Z.shadow.medium,m.Z.transition.primary,m.Z.shadow.high),b=d.Z.img(c||(c=(0,g.Z)(["\n  width: 100%;\n  height: 500px;\n  margin-bottom: ",";\n  object-fit: cover;\n  border-radius: $border-radius;\n"])),m.Z.space[4]),y=d.Z.p(i||(i=(0,g.Z)(["\n  font-size: ",";\n  font-weight: ",";\n  color: ",";\n  line-height: 1.14;\n  text-align: left;\n"])),m.Z.fontSizes.m,m.Z.fontWeights.regular,m.Z.colors.secondary),x=d.Z.span(o||(o=(0,g.Z)(["\n  display: block;\n  text-transform: uppercase;\n  margin-bottom: ",";\n"])),m.Z.space[2]),w=d.Z.span(s||(s=(0,g.Z)(["\n  color: $accent-color;\n"]))),k=n(184),T=function(e){var t,n=e.movieObj,a=e.genres,r=e.fetchMovieDetails,c=n.poster_path,i=n.title,o=void 0===i?"":i,s=n.id,u=n.genre_ids,l=n.release_date,p=void 0===l?"    ":l,h=a.genres,g=void 0===h?[]:h;return(0,k.jsx)(v,{children:(0,k.jsxs)(Z.OL,{to:"/movies/".concat(s),onClick:function(){r(s)},children:[(0,k.jsx)(b,{src:(t=c,"https://image.tmdb.org/t/p/w500".concat(t)),alt:"movie poster"}),(0,k.jsxs)(y,{children:[(0,k.jsx)(x,{children:function(e){return e.length>30?e.slice(0,30)+"...":e}(o)}),(0,k.jsxs)(w,{children:[function(e,t){var n=[];if(0===e.length)return"no iformation";switch(e.map((function(e){return t.map((function(t){t.id===e&&n.push(t.name)}))})),!0){case n.length>2:return"".concat(n[0],", ").concat(n[1],", other");case 2===n.length:return"".concat(n[0],", ").concat(n[1]);case 1===n.length:return"".concat(n[0])}}(u,g)," | ",p.slice(0,4)]})]})]})})},_=n(8950),S=function(e){var t=e.totalPages,n=e.page,a=e.movies,r=e.onClick,c=e.loading,i=e.setError,o=(0,l.useState)([]),s=(0,u.Z)(o,2),g=s[0],d=s[1];return(0,l.useEffect)((function(){new h.Z({reqType:"genre",mediaType:"movie"}).getReqData().then((function(e){return d(e)})).catch((function(e){return i(e.message)}))}),[i]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(f,{children:a.map((function(e){var t=e.id;return(0,k.jsx)(T,{movieObj:e,genres:g},t)}))}),t>1&&(0,k.jsx)(_.Z,{count:t,page:n,onChange:r,size:"large"}),c&&(0,k.jsx)(p.Nx,{width:"200",color:m.Z.colors.accent})]})}},9183:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(3626),r=n(407),c=n(1607),i=(0,a.Z)("div")(r.$_,r.cp,r.Dh,r.bK,r.GQ,r.eC,r.Oq,r.Cg,r.FK,r.AF,(0,r.bU)({variants:{container:{width:c.Z.sizes.container,ml:"auto",mr:"auto",pl:c.Z.space[5],pr:c.Z.space[5]},containerCentered:{width:c.Z.sizes.container,ml:"auto",mr:"auto",pl:c.Z.space[5],pr:c.Z.space[5],display:"flex",flexDirection:"column",alignItems:"center"},section:{pt:c.Z.space[5],pb:c.Z.space[5],ml:"auto",mr:"auto"},sectionHero:{pt:c.Z.space[7],pb:c.Z.space[7],ml:"auto",mr:"auto"}}}))},3485:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(9183),r=n(7354),c=n(1607),i=n(184),o=function(e){var t=e.title,n=e.titleVariant,o=e.titleAs,s=e.children,u=e.bgColor,l=void 0===u?c.Z.colors.primary:u,p=e.sectionVariant,h=e.containerVariant,g=e.minHeight,d=e.backgroundImage,m=void 0===d?null:d;return(0,i.jsx)(a.Z,{variant:p,as:"section",backgroundColor:l,minHeight:g,backgroundImage:m,backgroundSize:"cover",backgroundPosition:"center",children:(0,i.jsxs)(a.Z,{variant:h,children:[t&&(0,i.jsx)(r.Z,{variant:n,as:o,children:t}),s]})})}},6619:function(e,t,n){var a=n(5861),r=n(5671),c=n(3144),i=n(4687),o=n.n(i),s=n(3263),u="https://api.themoviedb.org/3/",l="ac91775ba29254b7e75060011bf34a90",p=function(){function e(t){var n=t.reqType,a=t.mediaType,c=t.timeWindow,i=void 0===c?"week":c;(0,r.Z)(this,e),this.reqType=n,this.mediaType=a,this.timeWindow=i,this.userRequest=null,this.page=1,this.totalResults=0}return(0,c.Z)(e,[{key:"getReqData",value:function(){var e=(0,a.Z)(o().mark((function e(){var t,n,a,r,c,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:null,n=i.length>1&&void 0!==i[1]?i[1]:1,e.t0=this.reqType,e.next="genre"===e.t0?5:"trending"===e.t0?10:"search"===e.t0?15:"getById"===e.t0?20:"movie"===e.t0?25:"credits"===e.t0?30:"reviews"===e.t0?35:"images"===e.t0?40:45;break;case 5:return a=new URLSearchParams({api_key:l}),e.next=8,s.Z.get("".concat(u).concat(this.reqType,"/").concat(this.mediaType,"/list?").concat(a));case 8:case 13:case 18:case 23:case 28:case 33:case 38:case 43:return r=e.sent,e.abrupt("break",46);case 10:return a=new URLSearchParams({api_key:l,page:n}),e.next=13,s.Z.get("".concat(u).concat(this.reqType,"/").concat(this.mediaType,"/").concat(this.timeWindow,"?").concat(a));case 15:return a=new URLSearchParams({api_key:l,query:this.userRequest,page:n}),e.next=18,s.Z.get("".concat(u).concat(this.reqType,"/").concat(this.mediaType,"?").concat(a));case 20:return a=new URLSearchParams({api_key:l}),e.next=23,s.Z.get("".concat(u).concat(this.mediaType,"/").concat(t,"?").concat(a));case 25:return a=new URLSearchParams({api_key:l}),e.next=28,s.Z.get("".concat(u).concat(this.mediaType,"/").concat(t,"?").concat(a));case 30:return a=new URLSearchParams({api_key:l}),e.next=33,s.Z.get("".concat(u).concat(this.mediaType,"/").concat(t,"/").concat(this.reqType,"?").concat(a));case 35:return a=new URLSearchParams({api_key:l}),e.next=38,s.Z.get("".concat(u).concat(this.mediaType,"/").concat(t,"/").concat(this.reqType,"?").concat(a));case 40:return a=new URLSearchParams({api_key:l}),e.next=43,s.Z.get("".concat(u).concat(this.mediaType,"/").concat(t,"/").concat(this.reqType,"?").concat(a));case 45:return e.abrupt("break",46);case 46:return c=r.data,this.getTotalRes(c),e.abrupt("return",c);case 49:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetPage",value:function(){this.page=1}},{key:"request",get:function(){return this.userRequest},set:function(e){this.userRequest=e}},{key:"getTotalRes",value:function(e){this.totalResults=e.total_results}}]),e}();t.Z=p},7354:function(e,t,n){var a=n(3626),r=n(407),c=n(1607),i=(0,a.Z)("p")(r.$_,r.cp,r.Dh,r.bK,r.Cg,r.FK,(0,r.bU)({variants:{mainTitle:{textAlign:"center",fontSize:c.Z.fontSizes.xl,fontWeight:c.Z.fontWeights.bold,color:c.Z.colors.secondary,ml:"auto",mr:"auto",mb:c.Z.space[5]},subTitle:{textAlign:"center",fontSize:c.Z.fontSizes.xl,fontWeight:c.Z.fontWeights.regular,color:c.Z.colors.secondary,ml:"auto",mr:"auto",mb:[5]},subTitleAccent:{textAlign:"center",fontSize:c.Z.fontSizes.xl,fontWeight:c.Z.fontWeights.regular,color:c.Z.colors.accent,ml:"auto",mr:"auto",mb:[5]}}}));t.Z=i},5415:function(e,t,n){n.r(t);var a=n(5861),r=n(9439),c=n(4687),i=n.n(c),o=n(2791),s=n(5299),u=n(6619),l=n(3485),p=n(5882),h=n(1087),g=n(184);t.default=function(){var e=(0,o.useState)([]),t=(0,r.Z)(e,2),n=t[0],c=t[1],d=(0,h.lr)({page:1}),m=(0,r.Z)(d,2),f=m[0],Z=m[1],v=(0,o.useState)(1),b=(0,r.Z)(v,2),y=b[0],x=b[1],w=(0,o.useState)(0),k=(0,r.Z)(w,2),T=k[0],_=k[1],S=(0,o.useState)(!1),q=(0,r.Z)(S,2),R=q[0],j=q[1],C=(0,o.useState)(""),z=(0,r.Z)(C,2),P=z[0],W=z[1],U=Number(f.get("page"));(0,o.useEffect)((function(){j(!0),0!==U&&U!==y&&x(U);var e=new u.Z({reqType:"trending",mediaType:"movie",timeWindow:"week"}),t=function(){var t=(0,a.Z)(i().mark((function t(n){var a,r,c,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getReqData(null,n);case 3:return a=t.sent,r=a.results,c=a.total_results,(o=a.total_pages)>1&&_(o),0===c.length&&s.Report.failure("No movies found!"),t.abrupt("return",r);case 12:t.prev=12,t.t0=t.catch(0),W(t.t0.status_message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}();t(y).then((function(e){return c(e)})).catch((function(e){return W(e.status_message)})).finally((function(){return j(!1)}))}),[U,y]);return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(l.Z,{title:"Most trending films of the week",titleVariant:"mainTitle",sectionVariant:"section",containerVariant:"containerCentered",children:[!P&&(0,g.jsx)(p.Z,{totalPages:T,page:y,movies:n,loading:R,onClick:function(e,t){x(t),Z({page:t}),window.scrollTo({top:0,behavior:"smooth"})}}),P&&s.Report.failure(P)]})})}}}]);
//# sourceMappingURL=415.d2670007.chunk.js.map